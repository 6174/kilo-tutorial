# A text editor

## Insert ordinary characters

Let's begin by writing a function that inserts a single character into a given
position of an `erow`.

{{row-insert-char}}

`memmove()` comes from `<string.h>`.

First we validate `at`. Then we allocate one more byte for the `chars` of the
`erow`, and use `memmove()` to make room for the new character. We increment
the `size` of the `chars` array, and then actually assign the character to its
position in the array. Finally, we call `editorUpdateRow()` so that the
`render` and `rsize` fields get updated with the new row content.

Now we'll create a new section called `/*** editor operations ***/`. This
section will contain functions that we'll call from `editorProcessKeypress()`
when we want to do various text editing operations. We'll add a function to
this section called `editorInsertChar()` which will take a character and use
`editorRowInsertChar()` to insert that character into the position that the
cursor is at.

{{editor-insert-char}}

If `E.cy == E.numrows`, then the cursor is on the tilde-line at the end of the
file, so we need to append a new row to the file before inserting a character
there. After inserting a character, we move the cursor forward so that the next
character the user inserts will go after the character just inserted.

Let's call `editorInsertChar()` in the `default` case of the `switch` statement
in `editorProcessKeypress()`. This will allow any keypress that isn't mapped to
an editor function to be inserted directly into the text being edited.

{{key-insert-char}}

## Prevent inserting special characters

{{block-special-chars}}

## Save to disk

{{rows-to-string}}

{{editor-save}}

{{ctrl-s-save}}

{{editor-save-errors}}

{{save-status-message}}

{{prototypes}}

## Dirty flag

{{dirty-variable}}

{{show-dirty}}

{{increment-dirty}}

{{reset-dirty}}

## Quit confirmation

{{quit-confirmation}}

## Simple backspace

{{row-del-char}}

{{editor-del-char}}

{{key-del-char}}

## Backspacing at the start of a line

{{del-row}}

{{row-append-string}}

{{del-char-row}}

## Deleting forward with the delete key

{{delete-forward}}

## Enter key

{{append-row-to-insert}}

{{use-insert-row}}

{{insert-newline}}

{{enter-key}}

## Save as...

{{editor-prompt}}

{{save-as}}

{{editor-prompt-escape}}

{{abort-save}}

{{prompt-backspace}}

